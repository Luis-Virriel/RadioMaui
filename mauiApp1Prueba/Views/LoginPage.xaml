<?xml version="1.0" encoding="utf-8" ?>
<ContentPage x:Class="mauiApp1Prueba.Views.LoginPage"
             xmlns="http://schemas.microsoft.com/dotnet/2021/maui"
             xmlns:x="http://schemas.microsoft.com/winfx/2009/xaml"
             Title=""
             NavigationPage.HasNavigationBar="False"
             Background="{StaticResource CoolBackgroundGradient}">

    <ScrollView>
        <Grid Padding="30,50,30,30" RowDefinitions="*,Auto,*">

            <!-- Contenido principal -->
            <StackLayout Grid.Row="1" Spacing="30">

                <!-- Logo y título -->
                <StackLayout Spacing="15">
                    <Label Text="📻" FontSize="80" HorizontalOptions="Center" />
                    <Label Text="Radio Punta del Este"
                           FontSize="32"
                           FontAttributes="Bold"
                           TextColor="{StaticResource Primary}"
                           HorizontalOptions="Center" />
                    <Label Text="Tu emisora favorita"
                           FontSize="18"
                           TextColor="{StaticResource TextSecondary}"
                           HorizontalOptions="Center" />
                </StackLayout>

                <!-- Formulario de login -->
                <StackLayout Spacing="20">

                    <!-- Campo usuario -->
                    <Frame BackgroundColor="{StaticResource SurfaceCard}"
                           BorderColor="Transparent"
                           CornerRadius="15"
                           Padding="5"
                           HasShadow="True">
                        <Entry x:Name="UsernameEntry"
                               Placeholder="Nombre de usuario"
                               FontSize="16"
                               HeightRequest="50"
                               BackgroundColor="Transparent"
                               TextColor="{StaticResource TextPrimary}"
                               PlaceholderColor="{StaticResource TextLight}" />
                    </Frame>

                    <!-- Campo contraseña -->
                    <Frame BackgroundColor="{StaticResource SurfaceCard}"
                           BorderColor="Transparent"
                           CornerRadius="15"
                           Padding="5"
                           HasShadow="True">
                        <Grid>
                            <Entry x:Name="PasswordEntry"
                                   Placeholder="Contraseña"
                                   IsPassword="True"
                                   FontSize="16"
                                   HeightRequest="50"
                                   BackgroundColor="Transparent"
                                   TextColor="{StaticResource TextPrimary}"
                                   PlaceholderColor="{StaticResource TextLight}" />
                            <!-- Botón mostrar/ocultar contraseña -->
                            <Button x:Name="ShowPasswordButton"
                                    Text="👁️"
                                    BackgroundColor="Transparent"
                                    TextColor="{StaticResource TextLight}"
                                    HorizontalOptions="End"
                                    VerticalOptions="Center"
                                    WidthRequest="40"
                                    HeightRequest="40"
                                    Clicked="OnTogglePasswordVisibility"
                                    FontSize="16" />
                        </Grid>
                    </Frame>

                    <!-- Mensaje de error -->
                    <Label x:Name="ErrorLabel"
                           TextColor="{StaticResource Error}"
                           FontSize="14"
                           FontAttributes="Bold"
                           HorizontalOptions="Center"
                           HorizontalTextAlignment="Center"
                           IsVisible="False"
                           Margin="10,0" />

                    <!-- Loading indicator -->
                    <ActivityIndicator x:Name="LoadingIndicator"
                                       IsVisible="False"
                                       IsRunning="False"
                                       Color="{StaticResource Primary}"
                                       HeightRequest="30" />

                    <!-- Botón login -->
                    <Button x:Name="LoginButton"
                            Text="Iniciar Sesión"
                            BackgroundColor="{StaticResource Primary}"
                            TextColor="{StaticResource TextOnPrimary}"
                            CornerRadius="25"
                            HeightRequest="55"
                            FontSize="18"
                            FontAttributes="Bold"
                            Clicked="OnLoginClicked"
                            Margin="0,10,0,0">
                        <Button.Shadow>
                            <Shadow Brush="{StaticResource PrimaryBrush}"
                                    Offset="0,4"
                                    Radius="10"
                                    Opacity="0.3" />
                        </Button.Shadow>
                    </Button>

                    <!-- Botón biométrico -->
                    <Button x:Name="BiometricButton"
                            Text="🔐 Usar Biometría"
                            BackgroundColor="{StaticResource Secondary}"
                            TextColor="{StaticResource TextOnPrimary}"
                            CornerRadius="25"
                            HeightRequest="50"
                            FontSize="16"
                            Clicked="OnBiometricLoginClicked"
                            IsVisible="False">
                        <Button.Shadow>
                            <Shadow Brush="{StaticResource SecondaryBrush}"
                                    Offset="0,2"
                                    Radius="8"
                                    Opacity="0.3" />
                        </Button.Shadow>
                    </Button>

                </StackLayout>

                <!-- Separador -->
                <StackLayout Orientation="Horizontal"
                             HorizontalOptions="Center"
                             Spacing="10"
                             Margin="0,20,0,0">
                    <BoxView BackgroundColor="{StaticResource Gray300}"
                             HeightRequest="1"
                             WidthRequest="60"
                             VerticalOptions="Center" />
                    <Label Text="¿No tienes cuenta?"
                           TextColor="{StaticResource TextSecondary}"
                           FontSize="14" />
                    <BoxView BackgroundColor="{StaticResource Gray300}"
                             HeightRequest="1"
                             WidthRequest="60"
                             VerticalOptions="Center" />
                </StackLayout>

                <!-- Botón crear cuenta -->
                <Button x:Name="RegisterButton"
                        Text="Crear Nueva Cuenta"
                        BackgroundColor="Transparent"
                        TextColor="{StaticResource Primary}"
                        BorderColor="{StaticResource Primary}"
                        BorderWidth="2"
                        CornerRadius="25"
                        HeightRequest="50"
                        FontSize="16"
                        FontAttributes="Bold"
                        Clicked="OnRegisterClicked" />

            </StackLayout>

            <!-- Footer -->
            <StackLayout Grid.Row="2"
                         VerticalOptions="End"
                         Margin="0,30,0,0">
                <Label Text="© 2025 Radio Punta del Este"
                       TextColor="{StaticResource TextLight}"
                       FontSize="12"
                       HorizontalOptions="Center" />
            </StackLayout>

        </Grid>
    </ScrollView>

</ContentPage>
