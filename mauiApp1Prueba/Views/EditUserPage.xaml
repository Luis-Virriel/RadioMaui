<?xml version="1.0" encoding="utf-8" ?>
<ContentPage x:Class="mauiApp1Prueba.Views.EditUserPage"
             xmlns="http://schemas.microsoft.com/dotnet/2021/maui"
             xmlns:x="http://schemas.microsoft.com/winfx/2009/xaml"
             Background="{StaticResource CoolBackgroundGradient}">

    <ScrollView>
        <Grid Padding="24,20,24,40">
            <Grid.RowDefinitions>
                <RowDefinition Height="Auto" />
                <RowDefinition Height="*" />
            </Grid.RowDefinitions>

            <!-- Header Mejorado -->
            <Frame Grid.Row="0" 
                   BackgroundColor="Transparent"
                   BorderColor="Transparent"
                   Margin="0,10,0,20">
                <StackLayout Spacing="12">
                    <!-- Título con icono -->
                    <StackLayout Orientation="Horizontal" 
                               HorizontalOptions="Center"
                               Spacing="12">
                        <Frame BackgroundColor="{StaticResource Primary}"
                               WidthRequest="50"
                               HeightRequest="50"
                               CornerRadius="25"
                               HasShadow="True"
                               Padding="0">
                            <Frame.Shadow>
                                <Shadow Brush="{StaticResource PrimaryBrush}"
                                        Offset="0,4"
                                        Radius="12"
                                        Opacity="0.25"/>
                            </Frame.Shadow>
                            <Label Text="✏️" 
                                   FontSize="24" 
                                   VerticalOptions="Center"
                                   HorizontalOptions="Center"
                                   TextColor="White"/>
                        </Frame>

                        <Label Text="Mi Perfil"
                               FontSize="28"
                               FontAttributes="Bold"
                               TextColor="White"
                               VerticalOptions="Center"/>
                    </StackLayout>

                    <Label Text="Actualiza tu información personal" 
                           FontSize="16" 
                           FontAttributes="Italic"
                           TextColor="{StaticResource TextSecondary}"
                           HorizontalOptions="Center"
                           HorizontalTextAlignment="Center"/>

                    <Label Text="Mantén tu perfil actualizado para una mejor experiencia" 
                           FontSize="13" 
                           TextColor="{StaticResource TextLight}"
                           HorizontalOptions="Center"
                           HorizontalTextAlignment="Center"
                           Margin="20,5,20,0"/>
                </StackLayout>
            </Frame>

            <!-- Contenido Principal -->
            <StackLayout Grid.Row="1" Spacing="24">

                <!-- Sección de Foto de Perfil Mejorada -->
                <Frame BackgroundColor="{StaticResource SurfaceCard}"
                       BorderColor="Transparent"
                       CornerRadius="20"
                       Padding="24"
                       HasShadow="True">
                    <Frame.Shadow>
                        <Shadow Brush="Black"
                                Offset="0,2"
                                Radius="8"
                                Opacity="0.1"/>
                    </Frame.Shadow>
                    <StackLayout Spacing="20">
                        <!-- Header de sección -->
                        <Grid>
                            <Grid.ColumnDefinitions>
                                <ColumnDefinition Width="Auto" />
                                <ColumnDefinition Width="*" />
                            </Grid.ColumnDefinitions>

                            <Frame Grid.Column="0" 
                                   BackgroundColor="{StaticResource Secondary}"
                                   WidthRequest="32"
                                   HeightRequest="32"
                                   CornerRadius="16"
                                   Padding="0">
                                <Label Text="📸" 
                                       FontSize="16" 
                                       VerticalOptions="Center"
                                       HorizontalOptions="Center"
                                       TextColor="White"/>
                            </Frame>

                            <StackLayout Grid.Column="1" 
                                       VerticalOptions="Center" 
                                       Margin="12,0,0,0">
                                <Label Text="Foto de Perfil" 
                                       FontSize="17" 
                                       FontAttributes="Bold"
                                       TextColor="{StaticResource TextPrimary}"/>
                                <Label Text="Personaliza tu imagen de perfil" 
                                       FontSize="12" 
                                       TextColor="{StaticResource TextLight}"/>
                            </StackLayout>
                        </Grid>

                        <!-- Foto de perfil con diseño circular mejorado -->
                        <StackLayout HorizontalOptions="Center" Spacing="16">
                            <Frame BackgroundColor="White"
                                   CornerRadius="85"
                                   HeightRequest="170"
                                   WidthRequest="170"
                                   HasShadow="True"
                                   Padding="10">
                                <Frame.Shadow>
                                    <Shadow Brush="{StaticResource Primary}"
                                            Offset="0,8"
                                            Radius="20"
                                            Opacity="0.15"/>
                                </Frame.Shadow>
                                <Frame BackgroundColor="{StaticResource Gray100}"
                                       CornerRadius="75"
                                       HeightRequest="150"
                                       WidthRequest="150"
                                       Padding="0">
                                    <Image x:Name="ProfileImage"
                                           Source="user_placeholder.png"
                                           Aspect="AspectFill"/>
                                </Frame>
                            </Frame>

                            <!-- Botones de foto con diseño mejorado -->
                            <Grid ColumnSpacing="12">
                                <Grid.ColumnDefinitions>
                                    <ColumnDefinition Width="*" />
                                    <ColumnDefinition Width="*" />
                                </Grid.ColumnDefinitions>

                                <Button Grid.Column="0"
                                        Text="📷 Cambiar"
                                        Clicked="OnChangePhotoClicked"
                                        BackgroundColor="{StaticResource Primary}"
                                        TextColor="White"
                                        CornerRadius="25"
                                        HeightRequest="50"
                                        FontSize="14"
                                        FontAttributes="Bold">
                                    <Button.Shadow>
                                        <Shadow Brush="{StaticResource Primary}"
                                                Offset="0,4"
                                                Radius="8"
                                                Opacity="0.3"/>
                                    </Button.Shadow>
                                </Button>

                                <Button Grid.Column="1"
                                        Text="🗑️ Eliminar"
                                        Clicked="OnRemovePhotoClicked"
                                        BackgroundColor="Transparent"
                                        TextColor="{StaticResource Error}"
                                        BorderColor="{StaticResource Error}"
                                        BorderWidth="2"
                                        CornerRadius="25"
                                        HeightRequest="50"
                                        FontSize="14"
                                        FontAttributes="Bold"/>
                            </Grid>
                        </StackLayout>
                    </StackLayout>
                </Frame>

                <!-- Información Personal Mejorada -->
                <Frame BackgroundColor="{StaticResource SurfaceCard}"
                       BorderColor="Transparent"
                       CornerRadius="20"
                       Padding="24"
                       HasShadow="True">
                    <Frame.Shadow>
                        <Shadow Brush="Black"
                                Offset="0,2"
                                Radius="8"
                                Opacity="0.1"/>
                    </Frame.Shadow>
                    <StackLayout Spacing="20">
                        <!-- Header de sección -->
                        <Grid>
                            <Grid.ColumnDefinitions>
                                <ColumnDefinition Width="Auto" />
                                <ColumnDefinition Width="*" />
                            </Grid.ColumnDefinitions>

                            <Frame Grid.Column="0" 
                                   BackgroundColor="{StaticResource Primary}"
                                   WidthRequest="32"
                                   HeightRequest="32"
                                   CornerRadius="16"
                                   Padding="0">
                                <Label Text="👤" 
                                       FontSize="16" 
                                       VerticalOptions="Center"
                                       HorizontalOptions="Center"
                                       TextColor="White"/>
                            </Frame>

                            <StackLayout Grid.Column="1" 
                                       VerticalOptions="Center" 
                                       Margin="12,0,0,0">
                                <Label Text="Información Personal" 
                                       FontSize="17" 
                                       FontAttributes="Bold"
                                       TextColor="{StaticResource TextPrimary}"/>
                                <Label Text="Actualiza tus datos de perfil" 
                                       FontSize="12" 
                                       TextColor="{StaticResource TextLight}"/>
                            </StackLayout>
                        </Grid>

                        <!-- Campos de entrada con diseño mejorado -->
                        <Grid RowSpacing="20">
                            <Grid.RowDefinitions>
                                <RowDefinition Height="Auto" />
                                <RowDefinition Height="Auto" />
                            </Grid.RowDefinitions>

                            <!-- Nombre completo -->
                            <StackLayout Grid.Row="0" Spacing="10">
                                <Label Text="Nombre completo *" 
                                       FontSize="15" 
                                       FontAttributes="Bold"
                                       TextColor="{StaticResource TextSecondary}"/>
                                <Frame BackgroundColor="{StaticResource Gray100}"
                                       BorderColor="Transparent"
                                       CornerRadius="12"
                                       Padding="0"
                                       HeightRequest="56">
                                    <Entry x:Name="NameEntry"
                                           Placeholder="Ingresa tu nombre completo"
                                           BackgroundColor="Transparent"
                                           TextColor="Black"
                                           PlaceholderColor="Gray"
                                           FontSize="16"
                                           Margin="16,0"/>
                                </Frame>
                            </StackLayout>

                            <!-- Email -->
                            <StackLayout Grid.Row="1" Spacing="10">
                                <Label Text="Correo electrónico *" 
                                       FontSize="15" 
                                       FontAttributes="Bold"
                                       TextColor="{StaticResource TextSecondary}"/>
                                <Frame BackgroundColor="{StaticResource Gray100}"
                                       BorderColor="Transparent"
                                       CornerRadius="12"
                                       Padding="0"
                                       HeightRequest="56">
                                    <Entry x:Name="EmailEntry"
                                           Placeholder="correo@ejemplo.com"
                                           Keyboard="Email"
                                           BackgroundColor="Transparent"
                                           TextColor="Black"
                                           PlaceholderColor="Gray"
                                           FontSize="16"
                                           Margin="16,0"/>
                                </Frame>
                            </StackLayout>
                        </Grid>
                    </StackLayout>
                </Frame>

                <!-- Botones de Acción Mejorados -->
                <Frame BackgroundColor="{StaticResource SurfaceCard}"
                       BorderColor="Transparent"
                       CornerRadius="20"
                       Padding="24"
                       HasShadow="True">
                    <Frame.Shadow>
                        <Shadow Brush="Black"
                                Offset="0,2"
                                Radius="8"
                                Opacity="0.1"/>
                    </Frame.Shadow>
                    <StackLayout Spacing="16">
                        <!-- Header de sección -->
                        <Grid>
                            <Grid.ColumnDefinitions>
                                <ColumnDefinition Width="Auto" />
                                <ColumnDefinition Width="*" />
                            </Grid.ColumnDefinitions>

                            <Frame Grid.Column="0" 
                                   BackgroundColor="{StaticResource Secondary}"
                                   WidthRequest="32"
                                   HeightRequest="32"
                                   CornerRadius="16"
                                   Padding="0">
                                <Label Text="⚙️" 
                                       FontSize="16" 
                                       VerticalOptions="Center"
                                       HorizontalOptions="Center"
                                       TextColor="White"/>
                            </Frame>

                            <StackLayout Grid.Column="1" 
                                       VerticalOptions="Center" 
                                       Margin="12,0,0,0">
                                <Label Text="Acciones" 
                                       FontSize="17" 
                                       FontAttributes="Bold"
                                       TextColor="{StaticResource TextPrimary}"/>
                                <Label Text="Guarda o cancela los cambios" 
                                       FontSize="12" 
                                       TextColor="{StaticResource TextLight}"/>
                            </StackLayout>
                        </Grid>

                        <!-- Botones principales -->
                        <StackLayout Spacing="12">
                            <Button Text="💾 GUARDAR CAMBIOS"
                                    Clicked="OnSaveClicked"
                                    BackgroundColor="LightSkyBlue"
                                    TextColor="DarkBlue"
                                    CornerRadius="30"
                                    HeightRequest="60"
                                    FontSize="18"
                                    FontAttributes="Bold">
                                <Button.Shadow>
                                    <Shadow Brush="LightSkyBlue"
                                            Offset="0,6"
                                            Radius="15"
                                            Opacity="0.6"/>
                                </Button.Shadow>
                            </Button>

                            <Button Text="❌ CANCELAR"
                                    Clicked="OnCancelClicked"
                                    BackgroundColor="Transparent"
                                    TextColor="White"
                                    BorderColor="White"
                                    BorderWidth="2"
                                    CornerRadius="30"
                                    HeightRequest="55"
                                    FontSize="16"
                                    FontAttributes="Bold">
                                <Button.Shadow>
                                    <Shadow Brush="White"
                                            Offset="0,4"
                                            Radius="12"
                                            Opacity="0.3"/>
                                </Button.Shadow>
                            </Button>
                        </StackLayout>
                    </StackLayout>
                </Frame>

                <!-- Footer informativo -->
                <Frame BackgroundColor="Transparent"
                       BorderColor="Transparent"
                       Padding="16">
                    <StackLayout Spacing="8">
                        <Label Text="📋 Los campos marcados con * son obligatorios" 
                               FontSize="13" 
                               TextColor="{StaticResource TextLight}"
                               HorizontalOptions="Center"
                               HorizontalTextAlignment="Center"/>

                        <Label Text="🔄 Los cambios se aplicarán inmediatamente después de guardar" 
                               FontSize="13" 
                               TextColor="{StaticResource TextLight}"
                               HorizontalOptions="Center"
                               HorizontalTextAlignment="Center"/>
                    </StackLayout>
                </Frame>

            </StackLayout>
        </Grid>
    </ScrollView>
</ContentPage>